# Configuração do PostgreSQL (porta alta para evitar conflitos)
DATABASE_URL=postgresql://usuario:senha@localhost:54321/zapflow
# ou configure individualmente:
DB_HOST=localhost
DB_PORT=54321
DB_NAME=zapflow
DB_USER=postgres
DB_PASSWORD=sua_senha

# JWT Secret para autenticação
# ⚠️ Em produção (NODE_ENV=production) o backend NÃO inicia sem JWT_SECRET.
JWT_SECRET=seu_jwt_secret_super_seguro_aqui_mude_em_producao
# Opcional: expiração do token JWT (padrão: 7d)
JWT_EXPIRES_IN=7d

# Porta do servidor
PORT=3001

# CORS - URLs permitidas (separadas por vírgula)
# Dica: o backend tenta detectar o IP automaticamente (SERVER_IP é opcional).
# - Para DEV local: use localhost/127.0.0.1
# - Para rede/VM: você pode setar CORS_ORIGIN=* (ou incluir seu IP), se necessário.
# Exemplos:
#   SERVER_IP=SEU_IP_SERVIDOR
#   CORS_ORIGIN=http://SEU_IP_SERVIDOR:5173,http://localhost:5173
CORS_ORIGIN=http://localhost:5173,http://127.0.0.1:5173

# Se estiver atrás de proxy reverso (Nginx) em produção, recomendo:
TRUST_PROXY=1
ENABLE_HSTS=true
# Em DEV, você pode permitir origens LAN automaticamente (em produção default é false)
# CORS_ALLOW_PRIVATE_NETWORK=true

# ============================================================================
# RATE LIMITING - Prevenção de Brute Force e DDoS
# ============================================================================

# Habilitar rate limiting:
# - Em produção (NODE_ENV=production): habilitado por padrão
# - Em dev: desabilitado por padrão
# Você pode forçar:
ENABLE_RATE_LIMITING=true

# Rate Limiting Geral (todas as rotas)
RATE_LIMIT_WINDOW_MINUTES=15
RATE_LIMIT_MAX=1000

# Rate Limiting para Login (prevenção de brute force)
LOGIN_RATE_LIMIT_WINDOW_MINUTES=15
LOGIN_RATE_LIMIT_MAX=5

# Rate Limiting para Rotas de Dados (API autenticada)
# Janela em segundos (padrão: 60s)
DATA_RATE_LIMIT_WINDOW_SECONDS=60
DATA_RATE_LIMIT_MAX=200

# Rate Limiting para Webhook (bursts são comuns)
WEBHOOK_RATE_LIMIT_WINDOW_SECONDS=60
WEBHOOK_RATE_LIMIT_MAX=2000

